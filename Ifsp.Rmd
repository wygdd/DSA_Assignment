---
title: "Labor Force Survey 2017"
author: "Bieske, Kibsgaard, Laouiti, Tan, Wenyu, Zhang"
date: "26/09/2017"
output: pdf_document
---
#1. Introduction

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(haven)
lfsp <- read_dta("lfsp_jm17_eul.dta")
```

#2. Exploratory Data Analysis
## 2.1 Clean dataset
```{r}

selected <- lfsp %>% select(MARSTA,RELIG11,SEX,AGE,INDE07M,BANDG,ETHGBEUL,HIQUL15D,HIGHO)

#AGE

#SEX
selected <- selected[!selected$RELIG11==-8,] 

# MARSTA
library(dplyr)
selected <- selected[!selected$MARSTA==-9,] 
#drop9 <- lfsp %>% filter(!MARSTA==-9)

#RELIG11
selected <- selected[!selected$RELIG11==-8,] 

#INDE07M
selected <- selected[!selected$INDE07M==-8,] 

#ETHGBEUL
selected <- selected[!selected$ETHGBEUL==-8 & !selected$ETHGBEUL==-9,] 
val_labels(selected$ETHGBEUL)

#HIQUAL15D
selected <- selected[!selected$HIQUL15D==-8 & !selected$HIQUL15D==-9,] 

#HIGHHO
selected <- selected[!selected$HIGHO==-8,] 

#BANDG
selected <- selected[!selected$BANDG==1 & !selected$BANDG==2 & !selected$BANDG==3 & !selected$BANDG==-8 &!selected$BANDG==-9,] 

selected %>% group_by(HIGHO)%>% summarise(count=n())

```

 
## 2.2 Combine categorical dataset
```{r}
#AGE

#SEX
# Label sex
library(labelled)
var_label(selected$SEX) <- "Sex of respondent"
val_label(selected$SEX,1) <- "Male"
val_label(selected$SEX,2) <- "Female"
selected$SEX <- factor(selected$SEX,levels=c(1,2),labels = c('Male','Female'))

# MARSTA
selected$MARSTA <- ifelse(!selected$MARSTA==1 & !selected$MARSTA==2,3,selected$MARSTA)
selected$MARSTA <- factor(selected$MARSTA, levels=c(1,2,3),labels = c('Single','Married','Other'))

#RELIG11
selected$RELIG11 <- ifelse(selected$RELIG11 == 1, 1 ,2)
selected$RELIG11 <- factor(selected$RELIG11, levels=c(1,2),labels = c('No','Yes'))

#INDE07M
#--- Combine 1,2,3,4,6,9 -->4
selected$INDE07M <- ifelse(selected$INDE07M == 1 | selected$INDE07M == 2 |selected$INDE07M == 3 | selected$INDE07M == 4 | selected$INDE07M == 6 |selected$INDE07M == 9, 4,selected$INDE07M)

#--- Replace 5-->1, 7-->2, 8-->3
selected$INDE07M <- ifelse(selected$INDE07M==5, 1,selected$INDE07M)
selected$INDE07M <- ifelse(selected$INDE07M==7, 2,selected$INDE07M)
selected$INDE07M <- ifelse(selected$INDE07M==8, 3,selected$INDE07M)

#--- Add labels for variabels
library(labelled)
#var_label(selected$INDE07M) <- "Industry sector in main job"
#val_label(selected$INDE07M,1)<-"Distribution, hotels and restaurants"
#val_label(selected$INDE07M,2) <- "Banking and Finance"
#val_label(selected$INDE07M,3) <- "Public admin, education, health"
#val_label(selected$INDE07M,4) <- "Other"

#--- Change to factor
selected$INDE07M <- factor(selected$INDE07M,levels = c(1,2,3,4),labels = c('Distribution, hotels and restaurants','Banking and Finance','Public admin, education, health','Other'))

#ETHGBEUL
selected$ETHGBEUL <- ifelse(selected$ETHGBEUL== 1 |selected$ETHGBEUL== 2 |selected$ETHGBEUL== 3 ,1,selected$ETHGBEUL)
selected$ETHGBEUL <- ifelse(selected$ETHGBEUL==10,3,selected$ETHGBEUL)
selected$ETHGBEUL <- ifelse(selected$ETHGBEUL== 4| selected$ETHGBEUL== 11)

#HIQUAL15D


#HIGHHO


#BANDG
```


#3. Methods


```{r}

```

#4. Analysis and Results



```{r}

```

#5. Conclusion






#6. References